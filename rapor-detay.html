<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>

    <title>Rapor Ana Menü - Raporan X</title>
    <style>
        body { font-family: Arial; background: linear-gradient(135deg,#4a148c,#7c4dff); margin:0; color:white; min-height:100vh; display:flex; flex-direction:column; }
        .header { padding:20px; text-align:center; font-size:28px; font-weight:bold; position: relative; }
        .back { position:absolute; left:15px; top:20px; background:rgba(255,255,255,0.2); padding:10px 20px; border-radius:30px; text-decoration:none; color:white; font-weight:bold; }
        .menu { flex:1; display:flex; flex-wrap:wrap; gap:20px; padding:30px; justify-content:center; align-content:flex-start; }
        .btn { flex:1 1 350px; background:#6a1b9a; padding:35px; font-size:24px; font-weight:bold; border:none; border-radius:20px; color:white; cursor:pointer; box-shadow:0 8px 20px rgba(0,0,0,0.4); transition: 0.3s; }
        .btn:hover { background:#8e24aa; transform:scale(1.05); }
        .btn-main-feature { background: #4527a0; border: 2px solid #b39ddb; }
        .footer-btn { background:#ff5722; padding:25px; font-size:28px; width:90%; max-width:600px; margin:20px auto; border-radius:20px; border:none; color:white; font-weight:bold; cursor: pointer; text-align: center; }
    </style>
</head>
<body oncontextmenu="return false;">
    <div class="header">
        <a href="index.html" class="back">Ana Sayfa</a>
        <div id="baslik">Gayrimenkul Raporu</div>
    </div>
    <div class="menu">
        <button class="btn btn-main-feature" onclick="go('konum_cevre.html')">KONUM VE ÇEVRE ÖZELLİKLERİ</button>
        <button class="btn" onclick="go('tapu_kayit.html')">TAPU KAYIT BİLGİLERİ</button>
        <button class="btn" onclick="go('imar.html')">İMAR DURUMU</button>
        <button class="btn" onclick="go('belgeler.html')">İNCELENEN BELGELER</button>
        <button class="btn" onclick="go('bina.html')">BİNA BİLGİLERİ</button>
        <button class="btn" onclick="go('bagimsiz-bolum-detay.html')">BAĞIMSIZ BÖLÜM DETAY</button>
        <button class="btn" onclick="go('emsal.html')">EMSAL KARŞILAŞTIRMA</button>
    </div>
    
    <button class="footer-btn" onclick="go('rapor-olustur.html')">TAM RAPOR OLUŞTUR</button>

    <script>
        // 2. ADIM: GÜVENLİK VE VERİ KONTROLÜ
        const urlParams = new URLSearchParams(window.location.search);
        const id = urlParams.get('id');
        let reports = JSON.parse(localStorage.getItem('gayrimenkul_reports')) || [];
        let report = reports[id];

        auth.onAuthStateChanged((user) => {
            if (!user || !id || !report) {
                window.location.href = 'index.html';
            } else {
                document.getElementById('baslik').textContent = report.propertyName || "İsimsiz Gayrimenkul";
            }
        });

        // Yönlendirme Fonksiyonu (ID'yi koruyarak geçer)
        function go(page) {
            window.location.href = page + "?id=" + id;
        }
    </script>
</body>
</html>